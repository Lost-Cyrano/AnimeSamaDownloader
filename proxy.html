<!DOCTYPE html>
<html>
<head>
    <title>Proxy Anim Sama</title>
    <script>
        // CSS d'Anim Sama extrait de votre exemple
        const animSamaStyles = `
            /* Styles extraits d'Anim Sama */
            body {
                background-color: #1a1a1a;
                color: #ffffff;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            }
            .container {
                max-width: 1200px;
                margin: 0 auto;
                padding: 20px;
            }
            .chapter-images img {
                width: 100%;
                height: auto;
                margin: 10px 0;
                border-radius: 5px;
            }
            /* Ajoutez ici d'autres styles spécifiques d'Anim Sama */
        `;

        async function fetchPage(url) {
            try {
                const proxies = [
                    `https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`,
                    `https://corsproxy.io/?${encodeURIComponent(url)}`,
                    `https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(url)}`
                ];
                
                for (const proxyUrl of proxies) {
                    try {
                        const response = await fetch(proxyUrl);
                        if (response.ok) {
                            return await response.text();
                        }
                    } catch (e) {
                        continue;
                    }
                }
                throw new Error('Tous les proxies ont échoué');
            } catch (error) {
                return `Erreur: ${error.message}`;
            }
        }

        window.addEventListener('message', async (event) => {
            if (event.data.type === 'FETCH_HTML') {
                const html = await fetchPage(event.data.url);
                // Injecter le CSS d'Anim Sama dans la réponse
                const processedHtml = html.replace('</head>', `<style>${animSamaStyles}</style></head>`);
                
                event.source.postMessage({
                    type: 'HTML_RESPONSE',
                    content: processedHtml,
                    requestId: event.data.requestId
                }, event.origin);
            }
        });
    </script>
</head>
<body>
    <!-- Proxy pour Anim Sama -->
</body>
</html>
